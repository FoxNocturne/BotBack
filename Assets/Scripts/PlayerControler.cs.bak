using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.InputSystem;

public class PlayerControler : BotBackManager
{
    public Transform SelectedRobot = null;
    public GameObject[] Robots;
    Vector3 pos;
    public float CellSize = 0.2f;              
    public float speed = 1.0f; 

    public void GoForward()
    {
        if ( SelectedRobot )
        {
<<<<<<< HEAD
            //SelectedRobot.GetComponent<Robot>().GoUp();
           // pos += Vector3.forward * CellSize;
=======
            SelectedRobot.GetComponent<Robot>().GoUp(Vector3.forward * CellSize);
>>>>>>> d209971b500c3002a53eb78873da0e4d3f533a01
        }
    }
    public void GoBackward()
    {
        if (SelectedRobot)
        {
<<<<<<< HEAD
            //SelectedRobot.GetComponent<Robot>().GoDown();
           // pos += Vector3.back * CellSize;
=======
            SelectedRobot.GetComponent<Robot>().GoDown(Vector3.back * CellSize);
>>>>>>> d209971b500c3002a53eb78873da0e4d3f533a01
        }
    }
    public void GoLeft()
    {
        if (SelectedRobot)
        {
<<<<<<< HEAD
            //SelectedRobot.GetComponent<Robot>().GoLeft();
            //pos += Vector3.left * CellSize;
=======
            SelectedRobot.GetComponent<Robot>().GoLeft(Vector3.left * CellSize);
>>>>>>> d209971b500c3002a53eb78873da0e4d3f533a01
        }
    }
    public void GoRight()
    {
        if (SelectedRobot)
        {
<<<<<<< HEAD
            //SelectedRobot.GetComponent<Robot>().GoRight();
            //pos += Vector3.right * CellSize;
=======
            SelectedRobot.GetComponent<Robot>().GoRight(Vector3.right * CellSize);
>>>>>>> d209971b500c3002a53eb78873da0e4d3f533a01
        }
    }

    void FixedUpdate()
    {
        if ( SelectedRobot )
            SelectedRobot.position = Vector3.MoveTowards(SelectedRobot.position, pos, Time.deltaTime * speed);   
    }

    public void ChangeBot(  InputAction.CallbackContext context  )  
    {
        if ( context.performed &&  Robots.Length >= int.Parse(context.control.name) && Robots[ int.Parse(context.control.name) - 1] )
        {
            Debug.Log(context.control.name);
            SelectedRobot = Robots[int.Parse(context.control.name) - 1].transform;
            pos = SelectedRobot.position;
        }
    }

    public void BotAction()
    {
        if (SelectedRobot)
        {
            //SelectedRobot.GetComponent<Robot>().Action();
            Debug.Log("Action");
        }
    }
    // Start is called before the first frame update
    void Start()
    {
    }

    // Update is called once per frame
    void Update()
    {
        
    }
}
